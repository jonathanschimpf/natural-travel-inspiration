import{s as ae,d as oe,n as O,r as ce,c as ne,o as ue,e as de}from"../chunks/scheduler.aRr4IY4D.js";import{S as re,i as ie,e as b,s as L,t as G,c as g,a as N,d as v,f as I,k as x,b as Q,l as a,g as U,h as m,z as K,j as Y,A as se,B as he,n as W,o as fe,p as J,r as pe,v as me,w as ve,x as _e,y as we}from"../chunks/index.c-bVlinL.js";import{w as le}from"../chunks/index.CiRpDZXj.js";function be(l){let e,s='<p class="location ask-photographer svelte-davd7v">Location Unknown — <span class="smaller-down-arrow svelte-davd7v">⬇ </span>Ask The Photographer Below</p>';return{c(){e=b("div"),e.innerHTML=s,this.h()},l(t){e=g(t,"DIV",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-9wmags"&&(e.innerHTML=s),this.h()},h(){a(e,"class","unknown-location svelte-davd7v")},m(t,o){U(t,e,o)},p:O,d(t){t&&v(e)}}}function ge(l){let e,s=l[0].location.name+"",t;return{c(){e=b("p"),t=G(s),this.h()},l(o){e=g(o,"P",{class:!0});var r=N(e);t=Q(r,s),r.forEach(v),this.h()},h(){a(e,"class","location svelte-davd7v")},m(o,r){U(o,e,r),m(e,t)},p(o,r){r&1&&s!==(s=o[0].location.name+"")&&Y(t,s)},d(o){o&&v(e)}}}function ke(l){let e,s,t,o,r,_,d,E,h,f,V="Photo by",S,p,w=l[0].user.name+"",q,C,A,T,i="on",k,u,y,M,n,c="Download",j,H;function Z(P,D){return P[0].location.name?ge:be}let z=Z(l),R=z(l);return{c(){e=b("div"),s=b("div"),t=b("img"),_=L(),d=b("div"),R.c(),E=L(),h=b("div"),f=b("span"),f.textContent=V,S=L(),p=b("a"),q=G(w),A=L(),T=b("span"),T.textContent=i,k=L(),u=b("a"),y=G("Unsplash"),M=L(),n=b("button"),n.textContent=c,this.h()},l(P){e=g(P,"DIV",{class:!0});var D=N(e);s=g(D,"DIV",{class:!0});var $=N(s);t=g($,"IMG",{src:!0,alt:!0,class:!0}),$.forEach(v),_=I(D),d=g(D,"DIV",{class:!0});var F=N(d);R.l(F),E=I(F),h=g(F,"DIV",{class:!0});var B=N(h);f=g(B,"SPAN",{class:!0,"data-svelte-h":!0}),x(f)!=="svelte-b69ulm"&&(f.textContent=V),S=I(B),p=g(B,"A",{class:!0,href:!0,target:!0,rel:!0});var ee=N(p);q=Q(ee,w),ee.forEach(v),A=I(B),T=g(B,"SPAN",{class:!0,"data-svelte-h":!0}),x(T)!=="svelte-16j78ur"&&(T.textContent=i),k=I(B),u=g(B,"A",{class:!0,href:!0,target:!0,rel:!0});var te=N(u);y=Q(te,"Unsplash"),te.forEach(v),B.forEach(v),F.forEach(v),M=I(D),n=g(D,"BUTTON",{class:!0,"data-svelte-h":!0}),x(n)!=="svelte-64za16"&&(n.textContent=c),D.forEach(v),this.h()},h(){oe(t.src,o=l[0].urls.regular)||a(t,"src",o),a(t,"alt",r=l[0].alt_description||"Unsplash Photo"),a(t,"class","svelte-davd7v"),a(s,"class","image-container svelte-davd7v"),a(f,"class","credit-photo-by svelte-davd7v"),a(p,"class","credit-links svelte-davd7v"),a(p,"href",C=X(l[0].user.links.html)),a(p,"target","_blank"),a(p,"rel","noopener noreferrer"),a(T,"class","credit-on svelte-davd7v"),a(u,"class","credit-links svelte-davd7v"),a(u,"href",X("https://unsplash.com")),a(u,"target","_blank"),a(u,"rel","noopener noreferrer"),a(h,"class","caption svelte-davd7v"),a(d,"class","photo-information svelte-davd7v"),a(n,"class","download-button svelte-davd7v"),a(e,"class","photo-card svelte-davd7v")},m(P,D){U(P,e,D),m(e,s),m(s,t),m(e,_),m(e,d),R.m(d,null),m(d,E),m(d,h),m(h,f),m(h,S),m(h,p),m(p,q),m(h,A),m(h,T),m(h,k),m(h,u),m(u,y),m(e,M),m(e,n),j||(H=K(n,"click",l[1]),j=!0)},p(P,[D]){D&1&&!oe(t.src,o=P[0].urls.regular)&&a(t,"src",o),D&1&&r!==(r=P[0].alt_description||"Unsplash Photo")&&a(t,"alt",r),z===(z=Z(P))&&R?R.p(P,D):(R.d(1),R=z(P),R&&(R.c(),R.m(d,E))),D&1&&w!==(w=P[0].user.name+"")&&Y(q,w),D&1&&C!==(C=X(P[0].user.links.html))&&a(p,"href",C)},i:O,o:O,d(P){P&&v(e),R.d(),j=!1,H()}}}const Ce="Natural Travel Inspiration",ye="referral";function X(l){return`${l}?utm_source=${Ce}&utm_medium=${ye}`}function Pe(l,e,s){let{photo:t}=e,{onDownload:o}=e;function r(){if(console.log("Triggering download for photo:",t),o&&typeof o=="function"){const _=`unsplash_image_${t.id}.jpg`;console.log("Filename:",_),o(t,_)}else console.error("Download function not provided!")}return l.$$set=_=>{"photo"in _&&s(0,t=_.photo),"onDownload"in _&&s(2,o=_.onDownload)},[t,r,o]}class De extends re{constructor(e){super(),ie(this,e,Pe,ke,ae,{photo:0,onDownload:2})}}function Te(l){let e,s="Loading...";return{c(){e=b("p"),e.textContent=s,this.h()},l(t){e=g(t,"P",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-qdsr2u"&&(e.textContent=s),this.h()},h(){a(e,"class","svelte-1l5n4no")},m(t,o){U(t,e,o)},p:O,i:O,o:O,d(t){t&&v(e)}}}function Ue(l){let e,s;return e=new De({props:{photo:l[0],onDownload:l[5]}}),{c(){me(e.$$.fragment)},l(t){ve(e.$$.fragment,t)},m(t,o){_e(e,t,o),s=!0},p(t,o){const r={};o&1&&(r.photo=t[0]),e.$set(r)},i(t){s||(J(e.$$.fragment,t),s=!0)},o(t){W(e.$$.fragment,t),s=!1},d(t){we(e,t)}}}function Ee(l){let e,s;return{c(){e=b("p"),s=G(l[1]),this.h()},l(t){e=g(t,"P",{class:!0});var o=N(e);s=Q(o,l[1]),o.forEach(v),this.h()},h(){a(e,"class","svelte-1l5n4no")},m(t,o){U(t,e,o),m(e,s)},p(t,o){o&2&&Y(s,t[1])},i:O,o:O,d(t){t&&v(e)}}}function Re(l){let e,s="Natural Travel Inspiration ⛰️",t,o,r,_,d,E="Random Natural Inspiration",h,f,V='<span class="specific-smaller-down-arrow svelte-1l5n4no">⬇ </span>Search For A More Specific Random Image Below',S,p,w,q,C,A="Search",T,i,k;const u=[Ee,Ue,Te],y=[];function M(n,c){return n[1]?0:n[0]?1:2}return o=M(l),r=y[o]=u[o](l),{c(){e=b("h1"),e.textContent=s,t=L(),r.c(),_=L(),d=b("button"),d.textContent=E,h=L(),f=b("p"),f.innerHTML=V,S=L(),p=b("form"),w=b("input"),q=L(),C=b("button"),C.textContent=A,this.h()},l(n){e=g(n,"H1",{class:!0,"data-svelte-h":!0}),x(e)!=="svelte-dr4slq"&&(e.textContent=s),t=I(n),r.l(n),_=I(n),d=g(n,"BUTTON",{class:!0,"data-svelte-h":!0}),x(d)!=="svelte-1ujrdmr"&&(d.textContent=E),h=I(n),f=g(n,"P",{class:!0,"data-svelte-h":!0}),x(f)!=="svelte-7jy9bw"&&(f.innerHTML=V),S=I(n),p=g(n,"FORM",{class:!0});var c=N(p);w=g(c,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),q=I(c),C=g(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),x(C)!=="svelte-144da9z"&&(C.textContent=A),c.forEach(v),this.h()},h(){a(e,"class","svelte-1l5n4no"),a(d,"class","svelte-1l5n4no"),a(f,"class","svelte-1l5n4no"),a(w,"type","search"),a(w,"id","search-input"),a(w,"placeholder",""),a(w,"class","svelte-1l5n4no"),a(C,"type","submit"),a(C,"class","svelte-1l5n4no"),a(p,"class","pico-form svelte-1l5n4no")},m(n,c){U(n,e,c),U(n,t,c),y[o].m(n,c),U(n,_,c),U(n,d,c),U(n,h,c),U(n,f,c),U(n,S,c),U(n,p,c),m(p,w),se(w,l[2]),m(p,q),m(p,C),T=!0,i||(k=[K(d,"click",l[6]),K(w,"input",l[8]),K(p,"submit",he(l[7]))],i=!0)},p(n,[c]){let j=o;o=M(n),o===j?y[o].p(n,c):(pe(),W(y[j],1,1,()=>{y[j]=null}),fe(),r=y[o],r?r.p(n,c):(r=y[o]=u[o](n),r.c()),J(r,1),r.m(_.parentNode,_)),c&4&&w.value!==n[2]&&se(w,n[2])},i(n){T||(J(r),T=!0)},o(n){W(r),T=!1},d(n){n&&(v(e),v(t),v(_),v(d),v(h),v(f),v(S),v(p)),y[o].d(n),i=!1,ce(k)}}}const Le=50;function Ie(){const l=["mountain","hike","vista","cliff","forest","river"];return l[Math.floor(Math.random()*l.length)]}function Se(l,e,s){let t,o;const r="DhbwOlEXTWXSjSPsc0mBLHepnq6RtSt6boyDK-G50lw",_=le(new Set);ne(l,_,i=>s(9,t=i));const d=le([]);ne(l,d,i=>s(10,o=i));let E,h="",f="";const V=3600*1e3;function S(){const i=Date.now();return de(d,o=o.filter(k=>i-k<V),o),o.length<Le}function p(){o.push(Date.now())}async function w(i){if(!S())return s(1,h="Rate limit reached. Please wait."),null;const k=i.trim(),u=k.includes(" "),y=encodeURIComponent(u?`"${k}"`:k),M=`https://api.unsplash.com/photos/random?client_id=${r}&query=${y}`;try{const n=await fetch(M);if(!n.ok)throw new Error("Error fetching photo.");return p(),await n.json()}catch{return s(1,h="Error fetching new photo."),null}}async function q(i,k){try{const u=await fetch(`${i.links.download_location}?client_id=${r}`,{method:"GET",headers:{Authorization:`Client-ID ${r}`}});if(u.ok){const M=(await u.json()).url,n=await fetch(M);if(n.ok){const c=await n.blob(),j=URL.createObjectURL(c),H=document.createElement("a");H.href=j,H.download=k,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(j)}else throw new Error("Failed to download the image from Unsplash")}else throw new Error("Unsplash download trigger failed")}catch(u){console.error("Download error:",u)}}async function C(){let i=null;for(;!i;){const k=Ie(),u=await w(k);u&&!t.has(u.id)&&(i=u,t.add(u.id))}s(0,E=i)}async function A(){if(f.trim()){const i=await w(f);i&&!t.has(i.id)&&(s(0,E=i),t.add(i.id)),s(2,f="")}}ue(async()=>{try{const i=await w("nature");i?s(0,E=i):s(1,h="Could not load initial photo.")}catch(i){s(1,h="There was an error during the initial photo fetch."),console.error(i)}});function T(){f=this.value,s(2,f)}return[E,h,f,_,d,q,C,A,T]}class Ne extends re{constructor(e){super(),ie(this,e,Se,Re,ae,{})}}export{Ne as component};
