import{s as se,d as ee,n as O,r as re,c as te,o as ie,e as ce}from"../chunks/scheduler.aRr4IY4D.js";import{S as le,i as ae,e as b,s as L,t as X,c as g,a as B,d as w,f as q,k as j,b as W,l,g as U,h as _,z as K,j as J,A as oe,B as ue,n as G,o as de,p as Q,r as he,v as fe,w as pe,x as ve,y as me}from"../chunks/index.c-bVlinL.js";import{w as ne}from"../chunks/index.CiRpDZXj.js";function _e(a){let e,s='<p class="location ask-photographer svelte-davd7v">Location Unknown — <span class="smaller-down-arrow svelte-davd7v">⬇ </span>Ask The Photographer Below</p>';return{c(){e=b("div"),e.innerHTML=s,this.h()},l(t){e=g(t,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-9wmags"&&(e.innerHTML=s),this.h()},h(){l(e,"class","unknown-location svelte-davd7v")},m(t,o){U(t,e,o)},p:O,d(t){t&&w(e)}}}function we(a){let e,s=a[0].location.name+"",t;return{c(){e=b("p"),t=X(s),this.h()},l(o){e=g(o,"P",{class:!0});var r=B(e);t=W(r,s),r.forEach(w),this.h()},h(){l(e,"class","location svelte-davd7v")},m(o,r){U(o,e,r),_(e,t)},p(o,r){r&1&&s!==(s=o[0].location.name+"")&&J(t,s)},d(o){o&&w(e)}}}function be(a){let e,s,t,o,r,v,d,R,h,f,z="Photo by",I,p,m=a[0].user.name+"",S,C,N,D,i="on",k,c,T="Unsplash",x,n,u="Download",M,A;function Y(y,P){return y[0].location.name?we:_e}let V=Y(a),E=V(a);return{c(){e=b("div"),s=b("div"),t=b("img"),v=L(),d=b("div"),E.c(),R=L(),h=b("div"),f=b("span"),f.textContent=z,I=L(),p=b("a"),S=X(m),N=L(),D=b("span"),D.textContent=i,k=L(),c=b("a"),c.textContent=T,x=L(),n=b("button"),n.textContent=u,this.h()},l(y){e=g(y,"DIV",{class:!0});var P=B(e);s=g(P,"DIV",{class:!0});var Z=B(s);t=g(Z,"IMG",{src:!0,alt:!0,class:!0}),Z.forEach(w),v=q(P),d=g(P,"DIV",{class:!0});var F=B(d);E.l(F),R=q(F),h=g(F,"DIV",{class:!0});var H=B(h);f=g(H,"SPAN",{class:!0,"data-svelte-h":!0}),j(f)!=="svelte-b69ulm"&&(f.textContent=z),I=q(H),p=g(H,"A",{class:!0,href:!0,target:!0,rel:!0});var $=B(p);S=W($,m),$.forEach(w),N=q(H),D=g(H,"SPAN",{class:!0,"data-svelte-h":!0}),j(D)!=="svelte-16j78ur"&&(D.textContent=i),k=q(H),c=g(H,"A",{class:!0,href:!0,target:!0,rel:!0,"data-svelte-h":!0}),j(c)!=="svelte-1uiziu"&&(c.textContent=T),H.forEach(w),F.forEach(w),x=q(P),n=g(P,"BUTTON",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-64za16"&&(n.textContent=u),P.forEach(w),this.h()},h(){ee(t.src,o=a[0].urls.regular)||l(t,"src",o),l(t,"alt",r=a[0].alt_description||"Unsplash Photo"),l(t,"class","svelte-davd7v"),l(s,"class","image-container svelte-davd7v"),l(f,"class","credit-photo-by svelte-davd7v"),l(p,"class","credit-links svelte-davd7v"),l(p,"href",C=a[0].user.links.html),l(p,"target","_blank"),l(p,"rel","noopener noreferrer"),l(D,"class","credit-on svelte-davd7v"),l(c,"class","credit-links svelte-davd7v"),l(c,"href","https://unsplash.com"),l(c,"target","_blank"),l(c,"rel","noopener noreferrer"),l(h,"class","caption svelte-davd7v"),l(d,"class","photo-information svelte-davd7v"),l(n,"class","download-button svelte-davd7v"),l(e,"class","photo-card svelte-davd7v")},m(y,P){U(y,e,P),_(e,s),_(s,t),_(e,v),_(e,d),E.m(d,null),_(d,R),_(d,h),_(h,f),_(h,I),_(h,p),_(p,S),_(h,N),_(h,D),_(h,k),_(h,c),_(e,x),_(e,n),M||(A=K(n,"click",a[1]),M=!0)},p(y,[P]){P&1&&!ee(t.src,o=y[0].urls.regular)&&l(t,"src",o),P&1&&r!==(r=y[0].alt_description||"Unsplash Photo")&&l(t,"alt",r),V===(V=Y(y))&&E?E.p(y,P):(E.d(1),E=V(y),E&&(E.c(),E.m(d,R))),P&1&&m!==(m=y[0].user.name+"")&&J(S,m),P&1&&C!==(C=y[0].user.links.html)&&l(p,"href",C)},i:O,o:O,d(y){y&&w(e),E.d(),M=!1,A()}}}function ge(a,e,s){let{photo:t}=e,{onDownload:o}=e;function r(){if(console.log("Triggering download for photo:",t),o&&typeof o=="function"){const v=`unsplash_image_${t.id}.jpg`;console.log("Filename:",v),o(t,v)}else console.error("Download function not provided!")}return a.$$set=v=>{"photo"in v&&s(0,t=v.photo),"onDownload"in v&&s(2,o=v.onDownload)},[t,r,o]}class ke extends le{constructor(e){super(),ae(this,e,ge,be,se,{photo:0,onDownload:2})}}function Ce(a){let e,s="Loading...";return{c(){e=b("p"),e.textContent=s,this.h()},l(t){e=g(t,"P",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-qdsr2u"&&(e.textContent=s),this.h()},h(){l(e,"class","svelte-1l5n4no")},m(t,o){U(t,e,o)},p:O,i:O,o:O,d(t){t&&w(e)}}}function ye(a){let e,s;return e=new ke({props:{photo:a[0],onDownload:a[5]}}),{c(){fe(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,o){ve(e,t,o),s=!0},p(t,o){const r={};o&1&&(r.photo=t[0]),e.$set(r)},i(t){s||(Q(e.$$.fragment,t),s=!0)},o(t){G(e.$$.fragment,t),s=!1},d(t){me(e,t)}}}function Pe(a){let e,s;return{c(){e=b("p"),s=X(a[1]),this.h()},l(t){e=g(t,"P",{class:!0});var o=B(e);s=W(o,a[1]),o.forEach(w),this.h()},h(){l(e,"class","svelte-1l5n4no")},m(t,o){U(t,e,o),_(e,s)},p(t,o){o&2&&J(s,t[1])},i:O,o:O,d(t){t&&w(e)}}}function De(a){let e,s="Natural Travel Inspiration ⛰️",t,o,r,v,d,R="Random Natural Inspiration",h,f,z='<span class="specific-smaller-down-arrow svelte-1l5n4no">⬇ </span>Search For A More Specific Random Image Below',I,p,m,S,C,N="Search",D,i,k;const c=[Pe,ye,Ce],T=[];function x(n,u){return n[1]?0:n[0]?1:2}return o=x(a),r=T[o]=c[o](a),{c(){e=b("h1"),e.textContent=s,t=L(),r.c(),v=L(),d=b("button"),d.textContent=R,h=L(),f=b("p"),f.innerHTML=z,I=L(),p=b("form"),m=b("input"),S=L(),C=b("button"),C.textContent=N,this.h()},l(n){e=g(n,"H1",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-dr4slq"&&(e.textContent=s),t=q(n),r.l(n),v=q(n),d=g(n,"BUTTON",{class:!0,"data-svelte-h":!0}),j(d)!=="svelte-1ujrdmr"&&(d.textContent=R),h=q(n),f=g(n,"P",{class:!0,"data-svelte-h":!0}),j(f)!=="svelte-7jy9bw"&&(f.innerHTML=z),I=q(n),p=g(n,"FORM",{class:!0});var u=B(p);m=g(u,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),S=q(u),C=g(u,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(C)!=="svelte-144da9z"&&(C.textContent=N),u.forEach(w),this.h()},h(){l(e,"class","svelte-1l5n4no"),l(d,"class","svelte-1l5n4no"),l(f,"class","svelte-1l5n4no"),l(m,"type","search"),l(m,"id","search-input"),l(m,"placeholder",""),l(m,"class","svelte-1l5n4no"),l(C,"type","submit"),l(C,"class","svelte-1l5n4no"),l(p,"class","pico-form svelte-1l5n4no")},m(n,u){U(n,e,u),U(n,t,u),T[o].m(n,u),U(n,v,u),U(n,d,u),U(n,h,u),U(n,f,u),U(n,I,u),U(n,p,u),_(p,m),oe(m,a[2]),_(p,S),_(p,C),D=!0,i||(k=[K(d,"click",a[6]),K(m,"input",a[8]),K(p,"submit",ue(a[7]))],i=!0)},p(n,[u]){let M=o;o=x(n),o===M?T[o].p(n,u):(he(),G(T[M],1,1,()=>{T[M]=null}),de(),r=T[o],r?r.p(n,u):(r=T[o]=c[o](n),r.c()),Q(r,1),r.m(v.parentNode,v)),u&4&&m.value!==n[2]&&oe(m,n[2])},i(n){D||(Q(r),D=!0)},o(n){G(r),D=!1},d(n){n&&(w(e),w(t),w(v),w(d),w(h),w(f),w(I),w(p)),T[o].d(n),i=!1,re(k)}}}const Te=50;function Ue(){const a=["mountain","hike","vista","cliff","forest","river"];return a[Math.floor(Math.random()*a.length)]}function Re(a,e,s){let t,o;const r="DhbwOlEXTWXSjSPsc0mBLHepnq6RtSt6boyDK-G50lw",v=ne(new Set);te(a,v,i=>s(9,t=i));const d=ne([]);te(a,d,i=>s(10,o=i));let R,h="",f="";const z=3600*1e3;function I(){const i=Date.now();return ce(d,o=o.filter(k=>i-k<z),o),o.length<Te}function p(){o.push(Date.now())}async function m(i){if(!I())return s(1,h="Rate limit reached. Please wait."),null;const k=i.trim(),c=k.includes(" "),T=encodeURIComponent(c?`"${k}"`:k),x=`https://api.unsplash.com/photos/random?client_id=${r}&query=${T}`;try{const n=await fetch(x);if(!n.ok)throw new Error("Error fetching photo.");return p(),await n.json()}catch{return s(1,h="Error fetching new photo."),null}}async function S(i,k){try{const c=await fetch(`${i.links.download_location}?client_id=${r}`,{method:"GET",headers:{Authorization:`Client-ID ${r}`}});if(c.ok){const x=(await c.json()).url,n=await fetch(x);if(n.ok){const u=await n.blob(),M=URL.createObjectURL(u),A=document.createElement("a");A.href=M,A.download=k,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(M)}else throw new Error("Failed to download the image from Unsplash")}else throw new Error("Unsplash download trigger failed")}catch(c){console.error("Download error:",c)}}async function C(){let i=null;for(;!i;){const k=Ue(),c=await m(k);c&&!t.has(c.id)&&(i=c,t.add(c.id))}s(0,R=i)}async function N(){if(f.trim()){const i=await m(f);i&&!t.has(i.id)&&(s(0,R=i),t.add(i.id)),s(2,f="")}}ie(async()=>{try{const i=await m("nature");i?s(0,R=i):s(1,h="Could not load initial photo.")}catch(i){s(1,h="There was an error during the initial photo fetch."),console.error(i)}});function D(){f=this.value,s(2,f)}return[R,h,f,v,d,S,C,N,D]}class Ie extends le{constructor(e){super(),ae(this,e,Re,De,se,{})}}export{Ie as component};
