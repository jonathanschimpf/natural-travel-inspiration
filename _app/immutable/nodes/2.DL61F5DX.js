import{s as ae,d as oe,n as O,r as ce,c as ne,o as ue,e as he}from"../chunks/scheduler.aRr4IY4D.js";import{S as re,i as ie,e as w,s as E,t as G,c as b,a as N,d as _,f as R,k as j,b as Q,l as a,g as T,h as m,z as K,j as Y,A as se,B as de,n as W,o as fe,p as J,r as pe,v as me,w as _e,x as ve,y as ke}from"../chunks/index.c-bVlinL.js";import{w as le}from"../chunks/index.CiRpDZXj.js";function we(l){let e,s='<p class="location ask-photographer svelte-17khlhq">Location Unknown — <span class="smaller-down-arrow svelte-17khlhq">⬇ </span>Ask The Photographer Below</p>';return{c(){e=w("div"),e.innerHTML=s,this.h()},l(t){e=b(t,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-9wmags"&&(e.innerHTML=s),this.h()},h(){a(e,"class","unknown-location svelte-17khlhq")},m(t,o){T(t,e,o)},p:O,d(t){t&&_(e)}}}function be(l){let e,s=l[0].location.name+"",t;return{c(){e=w("p"),t=G(s),this.h()},l(o){e=b(o,"P",{class:!0});var r=N(e);t=Q(r,s),r.forEach(_),this.h()},h(){a(e,"class","location svelte-17khlhq")},m(o,r){T(o,e,r),m(e,t)},p(o,r){r&1&&s!==(s=o[0].location.name+"")&&Y(t,s)},d(o){o&&_(e)}}}function ge(l){let e,s,t,o,r,v,h,U,d,f,V="Photo by",L,p,k=l[0].user.name+"",I,C,A,D,i="on",g,u,y,S,n,c="Download",M,H;function Z(q,P){return q[0].location.name?be:we}let z=Z(l),x=z(l);return{c(){e=w("div"),s=w("div"),t=w("img"),v=E(),h=w("div"),x.c(),U=E(),d=w("div"),f=w("span"),f.textContent=V,L=E(),p=w("a"),I=G(k),A=E(),D=w("span"),D.textContent=i,g=E(),u=w("a"),y=G("Unsplash"),S=E(),n=w("button"),n.textContent=c,this.h()},l(q){e=b(q,"DIV",{class:!0});var P=N(e);s=b(P,"DIV",{class:!0});var $=N(s);t=b($,"IMG",{src:!0,alt:!0,class:!0}),$.forEach(_),v=R(P),h=b(P,"DIV",{class:!0});var F=N(h);x.l(F),U=R(F),d=b(F,"DIV",{class:!0});var B=N(d);f=b(B,"SPAN",{class:!0,"data-svelte-h":!0}),j(f)!=="svelte-b69ulm"&&(f.textContent=V),L=R(B),p=b(B,"A",{class:!0,href:!0,target:!0,rel:!0});var ee=N(p);I=Q(ee,k),ee.forEach(_),A=R(B),D=b(B,"SPAN",{class:!0,"data-svelte-h":!0}),j(D)!=="svelte-16j78ur"&&(D.textContent=i),g=R(B),u=b(B,"A",{class:!0,href:!0,target:!0,rel:!0});var te=N(u);y=Q(te,"Unsplash"),te.forEach(_),B.forEach(_),F.forEach(_),S=R(P),n=b(P,"BUTTON",{class:!0,"data-svelte-h":!0}),j(n)!=="svelte-64za16"&&(n.textContent=c),P.forEach(_),this.h()},h(){oe(t.src,o=l[0].urls.regular)||a(t,"src",o),a(t,"alt",r=l[0].alt_description||"Unsplash Photo"),a(t,"class","svelte-17khlhq"),a(s,"class","image-container svelte-17khlhq"),a(f,"class","credit-photo-by svelte-17khlhq"),a(p,"class","credit-links svelte-17khlhq"),a(p,"href",C=X(l[0].user.links.html)),a(p,"target","_blank"),a(p,"rel","noopener noreferrer"),a(D,"class","credit-on svelte-17khlhq"),a(u,"class","credit-links svelte-17khlhq"),a(u,"href",X("https://unsplash.com")),a(u,"target","_blank"),a(u,"rel","noopener noreferrer"),a(d,"class","caption svelte-17khlhq"),a(h,"class","photo-information svelte-17khlhq"),a(n,"class","download-button svelte-17khlhq"),a(e,"class","photo-card svelte-17khlhq")},m(q,P){T(q,e,P),m(e,s),m(s,t),m(e,v),m(e,h),x.m(h,null),m(h,U),m(h,d),m(d,f),m(d,L),m(d,p),m(p,I),m(d,A),m(d,D),m(d,g),m(d,u),m(u,y),m(e,S),m(e,n),M||(H=K(n,"click",l[1]),M=!0)},p(q,[P]){P&1&&!oe(t.src,o=q[0].urls.regular)&&a(t,"src",o),P&1&&r!==(r=q[0].alt_description||"Unsplash Photo")&&a(t,"alt",r),z===(z=Z(q))&&x?x.p(q,P):(x.d(1),x=z(q),x&&(x.c(),x.m(h,U))),P&1&&k!==(k=q[0].user.name+"")&&Y(I,k),P&1&&C!==(C=X(q[0].user.links.html))&&a(p,"href",C)},i:O,o:O,d(q){q&&_(e),x.d(),M=!1,H()}}}const Ce="Natural Travel Inspiration",ye="referral";function X(l){return`${l}?utm_source=${Ce}&utm_medium=${ye}`}function qe(l,e,s){let{photo:t}=e,{onDownload:o}=e;function r(){if(console.log("Triggering download for photo:",t),o&&typeof o=="function"){const v=`unsplash_image_${t.id}.jpg`;console.log("Filename:",v),o(t,v)}else console.error("Download function not provided!")}return l.$$set=v=>{"photo"in v&&s(0,t=v.photo),"onDownload"in v&&s(2,o=v.onDownload)},[t,r,o]}class Pe extends re{constructor(e){super(),ie(this,e,qe,ge,ae,{photo:0,onDownload:2})}}function De(l){let e,s="Loading...";return{c(){e=w("p"),e.textContent=s,this.h()},l(t){e=b(t,"P",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-qdsr2u"&&(e.textContent=s),this.h()},h(){a(e,"class","svelte-1x02kka")},m(t,o){T(t,e,o)},p:O,i:O,o:O,d(t){t&&_(e)}}}function Te(l){let e,s;return e=new Pe({props:{photo:l[0],onDownload:l[5]}}),{c(){me(e.$$.fragment)},l(t){_e(e.$$.fragment,t)},m(t,o){ve(e,t,o),s=!0},p(t,o){const r={};o&1&&(r.photo=t[0]),e.$set(r)},i(t){s||(J(e.$$.fragment,t),s=!0)},o(t){W(e.$$.fragment,t),s=!1},d(t){ke(e,t)}}}function Ue(l){let e,s;return{c(){e=w("p"),s=G(l[1]),this.h()},l(t){e=b(t,"P",{class:!0});var o=N(e);s=Q(o,l[1]),o.forEach(_),this.h()},h(){a(e,"class","svelte-1x02kka")},m(t,o){T(t,e,o),m(e,s)},p(t,o){o&2&&Y(s,t[1])},i:O,o:O,d(t){t&&_(e)}}}function xe(l){let e,s="Natural Travel Inspiration ⛰️",t,o,r,v,h,U="Random Natural Inspiration",d,f,V='<span class="specific-smaller-down-arrow svelte-1x02kka">⬇ </span>Search For A More Specific Random Image Below',L,p,k,I,C,A="Search",D,i,g;const u=[Ue,Te,De],y=[];function S(n,c){return n[1]?0:n[0]?1:2}return o=S(l),r=y[o]=u[o](l),{c(){e=w("h1"),e.textContent=s,t=E(),r.c(),v=E(),h=w("button"),h.textContent=U,d=E(),f=w("p"),f.innerHTML=V,L=E(),p=w("form"),k=w("input"),I=E(),C=w("button"),C.textContent=A,this.h()},l(n){e=b(n,"H1",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-dr4slq"&&(e.textContent=s),t=R(n),r.l(n),v=R(n),h=b(n,"BUTTON",{class:!0,"data-svelte-h":!0}),j(h)!=="svelte-1ujrdmr"&&(h.textContent=U),d=R(n),f=b(n,"P",{class:!0,"data-svelte-h":!0}),j(f)!=="svelte-1xyt44u"&&(f.innerHTML=V),L=R(n),p=b(n,"FORM",{class:!0});var c=N(p);k=b(c,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),I=R(c),C=b(c,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),j(C)!=="svelte-144da9z"&&(C.textContent=A),c.forEach(_),this.h()},h(){a(e,"class","svelte-1x02kka"),a(h,"class","svelte-1x02kka"),a(f,"class","more-specific-random-search-message svelte-1x02kka"),a(k,"type","search"),a(k,"id","search-input"),a(k,"placeholder",""),a(k,"class","svelte-1x02kka"),a(C,"type","submit"),a(C,"class","svelte-1x02kka"),a(p,"class","pico-form svelte-1x02kka")},m(n,c){T(n,e,c),T(n,t,c),y[o].m(n,c),T(n,v,c),T(n,h,c),T(n,d,c),T(n,f,c),T(n,L,c),T(n,p,c),m(p,k),se(k,l[2]),m(p,I),m(p,C),D=!0,i||(g=[K(h,"click",l[6]),K(k,"input",l[8]),K(p,"submit",de(l[7]))],i=!0)},p(n,[c]){let M=o;o=S(n),o===M?y[o].p(n,c):(pe(),W(y[M],1,1,()=>{y[M]=null}),fe(),r=y[o],r?r.p(n,c):(r=y[o]=u[o](n),r.c()),J(r,1),r.m(v.parentNode,v)),c&4&&k.value!==n[2]&&se(k,n[2])},i(n){D||(J(r),D=!0)},o(n){W(r),D=!1},d(n){n&&(_(e),_(t),_(v),_(h),_(d),_(f),_(L),_(p)),y[o].d(n),i=!1,ce(g)}}}const Ee=50;function Re(){const l=["mountain","hike","vista","cliff","forest","river"];return l[Math.floor(Math.random()*l.length)]}function Le(l,e,s){let t,o;const r="DhbwOlEXTWXSjSPsc0mBLHepnq6RtSt6boyDK-G50lw",v=le(new Set);ne(l,v,i=>s(9,t=i));const h=le([]);ne(l,h,i=>s(10,o=i));let U,d="",f="";const V=3600*1e3;function L(){const i=Date.now();return he(h,o=o.filter(g=>i-g<V),o),o.length<Ee}function p(){o.push(Date.now())}async function k(i){if(!L())return s(1,d="Rate limit reached. Please wait."),null;const g=i.trim(),u=g.includes(" "),y=encodeURIComponent(u?`"${g}"`:g),S=`https://api.unsplash.com/photos/random?client_id=${r}&query=${y}`;try{const n=await fetch(S);if(!n.ok)throw new Error("Error fetching photo.");return p(),await n.json()}catch{return s(1,d="Error fetching new photo."),null}}async function I(i,g){try{const u=await fetch(`${i.links.download_location}?client_id=${r}`,{method:"GET",headers:{Authorization:`Client-ID ${r}`}});if(u.ok){const S=(await u.json()).url,n=await fetch(S);if(n.ok){const c=await n.blob(),M=URL.createObjectURL(c),H=document.createElement("a");H.href=M,H.download=g,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(M)}else throw new Error("Failed to download the image from Unsplash")}else throw new Error("Unsplash download trigger failed")}catch(u){console.error("Download error:",u)}}async function C(){let i=null;for(;!i;){const g=Re(),u=await k(g);u&&!t.has(u.id)&&(i=u,t.add(u.id))}s(0,U=i)}async function A(){if(f.trim()){const i=await k(f);i&&!t.has(i.id)&&(s(0,U=i),t.add(i.id)),s(2,f="")}}ue(async()=>{try{const i=await k("nature");i?s(0,U=i):s(1,d="Could not load initial photo.")}catch(i){s(1,d="There was an error during the initial photo fetch."),console.error(i)}});function D(){f=this.value,s(2,f)}return[U,d,f,v,h,I,C,A,D]}class Ne extends re{constructor(e){super(),ie(this,e,Le,xe,ae,{})}}export{Ne as component};
